{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // Server Component context - ignore\n        }\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,sXAAO;IAEjC,OAAO,IAAA,sXAAkB,sUAAoF;QAC3G,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,oCAAoC;gBACtC;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProfileForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx <module evaluation>\",\n    \"ProfileForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,ofAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,kHACA","ignoreList":[0]}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProfileForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx\",\n    \"ProfileForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,ofAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,8FACA","ignoreList":[0]}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FriendSection = registerClientReference(\n    function() { throw new Error(\"Attempted to call FriendSection() from the server but FriendSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx <module evaluation>\",\n    \"FriendSection\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,ofAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,oHACA","ignoreList":[0]}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FriendSection = registerClientReference(\n    function() { throw new Error(\"Attempted to call FriendSection() from the server but FriendSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx\",\n    \"FriendSection\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,ofAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,gGACA","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Tabs = registerClientReference(\n    function() { throw new Error(\"Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx <module evaluation>\",\n    \"Tabs\",\n);\nexport const TabsContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx <module evaluation>\",\n    \"TabsContent\",\n);\nexport const TabsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx <module evaluation>\",\n    \"TabsList\",\n);\nexport const TabsTrigger = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx <module evaluation>\",\n    \"TabsTrigger\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;;;;;AACvE;;AACO,MAAM,OAAO,IAAA,ofAAuB,EACvC;IAAa,MAAM,IAAI,MAAM;AAAwN,GACrP,6GACA;AAEG,MAAM,cAAc,IAAA,ofAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,6GACA;AAEG,MAAM,WAAW,IAAA,ofAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,6GACA;AAEG,MAAM,cAAc,IAAA,ofAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,6GACA","ignoreList":[0]}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Tabs = registerClientReference(\n    function() { throw new Error(\"Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx\",\n    \"Tabs\",\n);\nexport const TabsContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx\",\n    \"TabsContent\",\n);\nexport const TabsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx\",\n    \"TabsList\",\n);\nexport const TabsTrigger = registerClientReference(\n    function() { throw new Error(\"Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/ui/tabs.tsx\",\n    \"TabsTrigger\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;;;;;AACvE;;AACO,MAAM,OAAO,IAAA,ofAAuB,EACvC;IAAa,MAAM,IAAI,MAAM;AAAwN,GACrP,yFACA;AAEG,MAAM,cAAc,IAAA,ofAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,yFACA;AAEG,MAAM,WAAW,IAAA,ofAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,yFACA;AAEG,MAAM,cAAc,IAAA,ofAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,yFACA","ignoreList":[0]}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/app/%28authenticated%29/mypage/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\nimport { redirect } from \"next/navigation\"\nimport { ProfileForm } from \"@/components/profile-form\"\nimport { FriendSection } from \"@/components/friend-section\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\n\nexport default async function MyPage() {\n  const supabase = await createClient()\n\n  const { data: userData, error } = await supabase.auth.getUser()\n  if (error || !userData?.user) {\n    redirect(\"/auth/login\")\n  }\n\n  const { data: profile } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", userData.user.id).single()\n\n  // 承認済みフレンド\n  const { data: friendships } = await supabase\n    .from(\"friendships\")\n    .select(`\n      id,\n      requester_id,\n      addressee_id,\n      status,\n      requester:profiles!friendships_requester_id_fkey(id, display_name, friend_code, avatar_url),\n      addressee:profiles!friendships_addressee_id_fkey(id, display_name, friend_code, avatar_url)\n    `)\n    .eq(\"status\", \"accepted\")\n    .or(`requester_id.eq.${userData.user.id},addressee_id.eq.${userData.user.id}`)\n\n  // 受信した申請（pending）\n  const { data: pendingRequests } = await supabase\n    .from(\"friendships\")\n    .select(`\n      id,\n      requester_id,\n      requester:profiles!friendships_requester_id_fkey(id, display_name, friend_code, avatar_url)\n    `)\n    .eq(\"addressee_id\", userData.user.id)\n    .eq(\"status\", \"pending\")\n\n  // 送信した申請（pending）\n  const { data: sentRequests } = await supabase\n    .from(\"friendships\")\n    .select(`\n      id,\n      addressee_id,\n      addressee:profiles!friendships_addressee_id_fkey(id, display_name, friend_code, avatar_url)\n    `)\n    .eq(\"requester_id\", userData.user.id)\n    .eq(\"status\", \"pending\")\n\n  // フレンドリストを整形\n  const friends =\n    friendships?.map((f) => {\n      const friend = f.requester_id === userData.user.id ? f.addressee : f.requester\n      return {\n        id: friend.id,\n        display_name: friend.display_name,\n        friend_code: friend.friend_code,\n        avatar_url: friend.avatar_url,\n      }\n    }) || []\n\n  return (\n    <div className=\"space-y-6 pb-20 md:pb-0 max-w-2xl mx-auto\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-foreground\">マイページ</h1>\n        <p className=\"text-muted-foreground\">プロフィールとフレンド管理</p>\n      </div>\n\n      <Tabs defaultValue=\"profile\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-2\">\n          <TabsTrigger value=\"profile\">プロフィール</TabsTrigger>\n          <TabsTrigger value=\"friends\">フレンド</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"profile\" className=\"space-y-6\">\n          <ProfileForm\n            initialData={{\n              displayName: profile?.display_name || \"\",\n              email: profile?.email || userData.user.email || \"\",\n              avatarUrl: profile?.avatar_url || null,\n            }}\n            currentEmail={userData.user.email || \"\"}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"friends\" className=\"space-y-6\">\n          <FriendSection\n            currentUserId={userData.user.id}\n            friendCode={profile?.friend_code || \"\"}\n            friends={friends}\n            pendingRequests={pendingRequests || []}\n            sentRequests={sentRequests || []}\n          />\n        </TabsContent>\n      </Tabs>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAEe,eAAe;IAC5B,MAAM,WAAW,MAAM,IAAA,mNAAY;IAEnC,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7D,IAAI,SAAS,CAAC,UAAU,MAAM;QAC5B,IAAA,6aAAQ,EAAC;IACX;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,EAAE,EAAE,MAAM;IAEvG,WAAW;IACX,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;;;;IAOT,CAAC,EACA,EAAE,CAAC,UAAU,YACb,EAAE,CAAC,CAAC,gBAAgB,EAAE,SAAS,IAAI,CAAC,EAAE,CAAC,iBAAiB,EAAE,SAAS,IAAI,CAAC,EAAE,EAAE;IAE/E,kBAAkB;IAClB,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;IAIT,CAAC,EACA,EAAE,CAAC,gBAAgB,SAAS,IAAI,CAAC,EAAE,EACnC,EAAE,CAAC,UAAU;IAEhB,kBAAkB;IAClB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;IAIT,CAAC,EACA,EAAE,CAAC,gBAAgB,SAAS,IAAI,CAAC,EAAE,EACnC,EAAE,CAAC,UAAU;IAEhB,aAAa;IACb,MAAM,UACJ,aAAa,IAAI,CAAC;QAChB,MAAM,SAAS,EAAE,YAAY,KAAK,SAAS,IAAI,CAAC,EAAE,GAAG,EAAE,SAAS,GAAG,EAAE,SAAS;QAC9E,OAAO;YACL,IAAI,OAAO,EAAE;YACb,cAAc,OAAO,YAAY;YACjC,aAAa,OAAO,WAAW;YAC/B,YAAY,OAAO,UAAU;QAC/B;IACF,MAAM,EAAE;IAEV,qBACE,0dAAC;QAAI,WAAU;;0BACb,0dAAC;;kCACC,0dAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,0dAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAGvC,0dAAC,2MAAI;gBAAC,cAAa;gBAAU,WAAU;;kCACrC,0dAAC,+MAAQ;wBAAC,WAAU;;0CAClB,0dAAC,kNAAW;gCAAC,OAAM;0CAAU;;;;;;0CAC7B,0dAAC,kNAAW;gCAAC,OAAM;0CAAU;;;;;;;;;;;;kCAG/B,0dAAC,kNAAW;wBAAC,OAAM;wBAAU,WAAU;kCACrC,cAAA,0dAAC,uNAAW;4BACV,aAAa;gCACX,aAAa,SAAS,gBAAgB;gCACtC,OAAO,SAAS,SAAS,SAAS,IAAI,CAAC,KAAK,IAAI;gCAChD,WAAW,SAAS,cAAc;4BACpC;4BACA,cAAc,SAAS,IAAI,CAAC,KAAK,IAAI;;;;;;;;;;;kCAIzC,0dAAC,kNAAW;wBAAC,OAAM;wBAAU,WAAU;kCACrC,cAAA,0dAAC,2NAAa;4BACZ,eAAe,SAAS,IAAI,CAAC,EAAE;4BAC/B,YAAY,SAAS,eAAe;4BACpC,SAAS;4BACT,iBAAiB,mBAAmB,EAAE;4BACtC,cAAc,gBAAgB,EAAE;;;;;;;;;;;;;;;;;;;;;;;AAM5C"}}]
}