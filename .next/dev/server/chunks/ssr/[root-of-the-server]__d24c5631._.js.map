{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // Server Component context - ignore\n        }\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,mVAAO;IAEjC,OAAO,IAAA,sXAAkB,sUAAoF;QAC3G,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,oCAAoC;gBACtC;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProfileForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx <module evaluation>\",\n    \"ProfileForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,idAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,kHACA","ignoreList":[0]}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProfileForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProfileForm() from the server but ProfileForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/profile-form.tsx\",\n    \"ProfileForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,idAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,8FACA","ignoreList":[0]}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FriendSection = registerClientReference(\n    function() { throw new Error(\"Attempted to call FriendSection() from the server but FriendSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx <module evaluation>\",\n    \"FriendSection\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,idAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,oHACA","ignoreList":[0]}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FriendSection = registerClientReference(\n    function() { throw new Error(\"Attempted to call FriendSection() from the server but FriendSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/insane/workspace/playground/v0-mahjong-score-tracker/components/friend-section.tsx\",\n    \"FriendSection\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,idAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,gGACA","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/daichi/insane/workspace/playground/v0-mahjong-score-tracker/app/%28authenticated%29/mypage/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\nimport { redirect } from \"next/navigation\"\nimport { ProfileForm } from \"@/components/profile-form\"\nimport { FriendSection } from \"@/components/friend-section\"\n\nexport default async function MyPage() {\n  const supabase = await createClient()\n\n  const { data: userData, error } = await supabase.auth.getUser()\n  if (error || !userData?.user) {\n    redirect(\"/auth/login\")\n  }\n\n  const { data: profile } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", userData.user.id).single()\n\n  // 承認済みフレンド\n  const { data: friendships } = await supabase\n    .from(\"friendships\")\n    .select(`\n      id,\n      requester_id,\n      addressee_id,\n      status,\n      requester:profiles!friendships_requester_id_fkey(id, display_name, friend_code),\n      addressee:profiles!friendships_addressee_id_fkey(id, display_name, friend_code)\n    `)\n    .eq(\"status\", \"accepted\")\n    .or(`requester_id.eq.${userData.user.id},addressee_id.eq.${userData.user.id}`)\n\n  // 受信した申請（pending）\n  const { data: pendingRequests } = await supabase\n    .from(\"friendships\")\n    .select(`\n      id,\n      requester_id,\n      requester:profiles!friendships_requester_id_fkey(id, display_name, friend_code)\n    `)\n    .eq(\"addressee_id\", userData.user.id)\n    .eq(\"status\", \"pending\")\n\n  // 送信した申請（pending）\n  const { data: sentRequests } = await supabase\n    .from(\"friendships\")\n    .select(`\n      id,\n      addressee_id,\n      addressee:profiles!friendships_addressee_id_fkey(id, display_name, friend_code)\n    `)\n    .eq(\"requester_id\", userData.user.id)\n    .eq(\"status\", \"pending\")\n\n  // フレンドリストを整形\n  const friends =\n    friendships?.map((f) => {\n      const friend = f.requester_id === userData.user.id ? f.addressee : f.requester\n      return {\n        id: friend.id,\n        display_name: friend.display_name,\n        friend_code: friend.friend_code,\n      }\n    }) || []\n\n  return (\n    <div className=\"space-y-6 pb-20 md:pb-0 max-w-2xl mx-auto\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-foreground\">マイページ</h1>\n        <p className=\"text-muted-foreground\">プロフィールとフレンド</p>\n      </div>\n\n      {/* プロフィール編集 */}\n      <ProfileForm\n        initialData={{\n          displayName: profile?.display_name || \"\",\n          email: profile?.email || userData.user.email || \"\",\n        }}\n      />\n\n      {/* フレンドセクション */}\n      <FriendSection\n        currentUserId={userData.user.id}\n        friendCode={profile?.friend_code || \"\"}\n        friends={friends}\n        pendingRequests={pendingRequests || []}\n        sentRequests={sentRequests || []}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAEe,eAAe;IAC5B,MAAM,WAAW,MAAM,IAAA,mNAAY;IAEnC,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7D,IAAI,SAAS,CAAC,UAAU,MAAM;QAC5B,IAAA,0YAAQ,EAAC;IACX;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,EAAE,EAAE,MAAM;IAEvG,WAAW;IACX,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;;;;IAOT,CAAC,EACA,EAAE,CAAC,UAAU,YACb,EAAE,CAAC,CAAC,gBAAgB,EAAE,SAAS,IAAI,CAAC,EAAE,CAAC,iBAAiB,EAAE,SAAS,IAAI,CAAC,EAAE,EAAE;IAE/E,kBAAkB;IAClB,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;IAIT,CAAC,EACA,EAAE,CAAC,gBAAgB,SAAS,IAAI,CAAC,EAAE,EACnC,EAAE,CAAC,UAAU;IAEhB,kBAAkB;IAClB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;IAIT,CAAC,EACA,EAAE,CAAC,gBAAgB,SAAS,IAAI,CAAC,EAAE,EACnC,EAAE,CAAC,UAAU;IAEhB,aAAa;IACb,MAAM,UACJ,aAAa,IAAI,CAAC;QAChB,MAAM,SAAS,EAAE,YAAY,KAAK,SAAS,IAAI,CAAC,EAAE,GAAG,EAAE,SAAS,GAAG,EAAE,SAAS;QAC9E,OAAO;YACL,IAAI,OAAO,EAAE;YACb,cAAc,OAAO,YAAY;YACjC,aAAa,OAAO,WAAW;QACjC;IACF,MAAM,EAAE;IAEV,qBACE,ubAAC;QAAI,WAAU;;0BACb,ubAAC;;kCACC,ubAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,ubAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAIvC,ubAAC,uNAAW;gBACV,aAAa;oBACX,aAAa,SAAS,gBAAgB;oBACtC,OAAO,SAAS,SAAS,SAAS,IAAI,CAAC,KAAK,IAAI;gBAClD;;;;;;0BAIF,ubAAC,2NAAa;gBACZ,eAAe,SAAS,IAAI,CAAC,EAAE;gBAC/B,YAAY,SAAS,eAAe;gBACpC,SAAS;gBACT,iBAAiB,mBAAmB,EAAE;gBACtC,cAAc,gBAAgB,EAAE;;;;;;;;;;;;AAIxC"}}]
}